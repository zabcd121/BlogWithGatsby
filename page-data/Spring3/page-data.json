{"componentChunkName":"component---src-templates-post-template-tsx","path":"/Spring3/","result":{"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2><em><strong>2일차 공부 기록!</strong></em></h2>\n<h1>1. Spring Library📗</h1>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">build.gradle\r\n\r\ndependencies {\r\n\timplementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\r\n\timplementation 'org.springframework.boot:spring-boot-starter-web'\r\n\ttestImplementation 'org.springframework.boot:spring-boot-starter-test'\r\n}</code></pre></div>\n<h4>실제로 내가 추가했던 spring-boot-starter-web, thymeleaf 라이브러리와 자동 생성되는 spring-boot-starter-test 라이브러리가 의존성에 추가되어 있다.</h4>\n<h4>하지만! External Libraries에 들어가보면 엄청나게 많은 라이브러리들이 연결되어 있다.</h4>\n<h4>maven, build과 같은 빌드 툴들은 의존관계를 관리해주는데</h4>\n<h4>예를 들어 내가 spring-boot-starter-web 라이브러리를 추가하면 그거에 또 의존 관계가 연결되어 있는 tomcat, mvc와 같은 라이브러리들이 함께 자동 다운로드된다.</h4>\n<h4>이런식으로 spring core까지 연결된다고 생각하면 됨</h4>\n<img src=\"https://velog.velcdn.com/images/zabcd121/post/db6b6063-cd04-44a5-9876-1c1f54764c57/image.png\" width=\"400\">\n<h4>트리구조라고 생각!</h4>\n<h2>Embedded Server</h2>\n<h4>tomcat이 같이 설치되면서 자체적으로 내장 서버를 가지고 있으니 run을 돌리면 웹 서버가 자동 실행되는 것임. 따라서 따로 tomcat 서버를 설치하고 설정하는 귀찮은 작업을 안해도 됨.</h4>\n<h2>Logging</h2>\n<h4>서버 개발자라면 System.out.print()를 지양하고 Log를 사용함. 위험한 에러 같은 것을 기록하기 위해 사용한다고 함.</h4>\n<p><img src=\"https://velog.velcdn.com/images/zabcd121/post/0deeb7d5-c538-48e1-88e5-9e9a57b397e7/image.png\" alt=\"\"></p>\n<h4>thymeleaf를 라이브러리를 추가하면 spring-boot-starter가 설치되고 그 안에는 logging과 관련된 라이브러리가 또 의존관계에 의해 설치된다. logback, log4j, slf4j가 있는데 요즘에는 slf4j와 logback의 조합을 많이 사용함.</h4>\n<h4>slf4j는 쉽게 말해서 interface이고 logback은 출력 구현체라고 생각하면 됨!(추가로 찾아보기)</h4>\n<h2>Test</h2>\n<h4>testCompileClassPath에 가보면 여러가지 테스트 관련 라이브러리들이 있는데 자바진영에서는 테스트할 때 junit이란 라이브러리를 많이 사용함</h4>\n<img src=\"https://velog.velcdn.com/images/zabcd121/post/5313cb14-9f84-4d8f-a8b3-02aa23897c9a/image.png\" width=\"50%\">\n<br>\r\n<br>\n<h2>정리</h2>\n<h3>스프링 부트 라이브러리</h3>\n<h4>spring-boot-starter-web</h4>\n<ul>\n<li>spring-boot-starter-tomcat: 톰캣 (웹서버)</li>\n<li>spring-webmvc: 스프링 웹 MVC</li>\n</ul>\n<h4>spring-boot-starter-thymeleaf: 타임리프 템플릿 엔진(View)</h4>\n<h4>spring-boot-starter(공통): 스프링 부트 + 스프링 코어 + 로깅</h4>\n<ul>\n<li>spring-boot\n<ul>\n<li>spring-core</li>\n</ul>\n</li>\n<li>spring-boot-starter-logging\n<ul>\n<li>logback, slf4j</li>\n</ul>\n</li>\n</ul>\n<h3>테스트 라이브러리</h3>\n<h4>spring-boot-starter-test</h4>\n<ul>\n<li>junit: 테스트 프레임워크</li>\n<li>mockito: 목 라이브러리</li>\n<li>assertj: 테스트 코드를 좀 더 편하게 작성하게 도와주는 라이브러리</li>\n<li>spring-test: 스프링 통합 테스트 지원</li>\n</ul>\n<h1>2. View 환경설정</h1>\n<h4>처음 <a href=\"http://localhost:8080/\" target=\"_blank\" rel=\"nofollow\">http://localhost:8080/</a> url로 이동해봤을 때</h4>\n<p><img src=\"https://velog.velcdn.com/images/zabcd121/post/2023e2a1-43fe-44c9-aa03-9027c25d3c6a/image.png\" alt=\"\"></p>\n<h4>와 같은 에러 페이지가 나오는데 이건 내가 아무것도 설정하지 않아서 그런 것!</h4>\n<h4>resources/static 하위에 index.html 파일을 넣어주면 자동으로 Spring Boot가 지원하는 Welcome Page 기능 사용 가능</h4>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.servlet.spring-mvc.welcome-page\" target=\"_blank\" rel=\"nofollow\">https://docs.spring.io/spring-boot/docs/current/reference/html/web.html#web.servlet.spring-mvc.welcome-page</a></p>\n<blockquote>\n<p>자료가 너무 방대하니 다 외울수는 없다! 공식 사이트 spring.io에 가서 문서를 찾아볼 수 있도록 하자.</p>\n</blockquote>\n<h4>위의 과정을 진행하면 정적 페이지를 생성하는 것임</h4>\n<h2>템플릿 엔진</h2>\n<h4>템플릿 엔진을 사용하면 동적 페이지로 동작하도록 할 수 있음!</h4>\n<h4>내가 사용할 템플릿 엔진은 앞서 설치했던 thymeleaf</h4>\n<ul>\n<li>thymeleaf 공식 사이트: <a href=\"https://www.thymeleaf.org/\" target=\"_blank\" rel=\"nofollow\">https://www.thymeleaf.org/</a></li>\n<li>Spring 공식 tutorial: <a href=\"https://spring.io/guides/gs/serving-web-content/\" target=\"_blank\" rel=\"nofollow\">https://spring.io/guides/gs/serving-web-content/</a></li>\n<li>Spring Boot 매뉴얼: <a href=\"https://docs.spring.io/spring-boot/docs/2.3.1.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-mvc-template-engines\" target=\"_blank\" rel=\"nofollow\">https://docs.spring.io/spring-boot/docs/2.3.1.RELEASE/reference/html/spring-boot-features.html#boot-features-spring-mvc-template-engines</a></li>\n</ul>\n<h3>연습 예제!</h3>\n<ol>\n<li>index.html 생성 (resources/static/index.html)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;!DOCTYPE HTML>\r\n&lt;html>\r\n&lt;head>\r\n    &lt;title>Hello&lt;/title>\r\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\r\n&lt;/head>\r\n&lt;body>\r\nHello\r\n&lt;a href=\"/hello\">hello&lt;/a>\r\n&lt;/body>\r\n&lt;/html></code></pre></div>\n<ol start=\"2\">\n<li>controller 생성</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">package hello.hellospring.controller;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\n@Controller\r\npublic class HelloController {\r\n\r\n    @GetMapping(\"hello\")\r\n    public String hello(Model model){\r\n        model.addAttribute(\"data\", \"hello!\");\r\n        return \"hello\";\r\n    }\r\n}\r\n</code></pre></div>\n<ol start=\"3\">\n<li>thymeleaf를 이용한 동적 페이지 생성(resources/templates/hello.html)</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;!DOCTYPE HTML>\r\n&lt;html xmlns:th=\"http://www.thymeleaf.org\">\r\n&lt;head>\r\n    &lt;title>Hello&lt;/title>\r\n    &lt;meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\r\n&lt;/head>\r\n&lt;body>\r\n&lt;p th:text=\"'안녕하세요. ' + ${data}\" >안녕하세요. 손님&lt;/p>\r\n&lt;/body>\r\n&lt;/html></code></pre></div>\n<h3>동작 원리</h3>\n<img src=\"https://velog.velcdn.com/images/zabcd121/post/a57de011-a9ba-438f-b306-39f62ce2b840/image.png\" width=\"50%\">\n출처: 스프링 입문 - 코드로 배우는 스프링 부트, 웹 MVC, DB 접근 기술(김영한)\n<h4>내가 controller에서 get메서드에서 반환했던 hello라는 String 값을 viewResolver가 기본적으로 resources:templates/ + {ViewName} + .html로 매핑해서 이 html을 렌더링하도록 함.</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;p th:text=\"'안녕하세요. ' + ${data}\" >안녕하세요. 손님&lt;/p></code></pre></div>\n<h4>여기서 th는 thymeleaf를 의미 그리고 ${data}는 내가 controller에서 model에 추가해준 속성 “data”를 의미하는 것이므로 “hello!”가 들어가게 됨</h4>\n<blockquote>\n<p>참고) spring-boot-devtools 라이브러리 추가 시, html 파일을 컴파일만 해주면 서버 재시작 없이 View 파일 변경이 가능해짐. intellij에서 컴파일 방법: build -> Recompile</p>\n</blockquote>\n<br>\r\n<br>\r\n2022-05-18 추가\n<h1>3. 빌드하고 실행하기</h1>\n<h3>1. ./gradlew.bat build(MAC: ./gralew build)</h3>\n<p>현재 프로젝트 디렉터리에서 진행해야 함\r\n그러면 build폴더가 생기게 되고 아래와 같은 폴더 및 파일들이 생김\r\n<img src=\"https://velog.velcdn.com/images/zabcd121/post/7ef4ad96-9402-422f-aad7-75ef8a471a6e/image.png\" width=\"60%\"></p>\n<h3>2. cd libs</h3>\n<img src=\"https://velog.velcdn.com/images/zabcd121/post/3e3957ba-47be-42b8-84da-3994bfa39de1/image.png\" width=\"60%\">\n<p>libs 폴더 내에 hello-spring-0.0.1-SNAPSHOT.jar, hello-spring-0.0.1-SNAPSHOT-plain.jar가 존재</p>\n<h4>3. java -jar {project name}-0.0.1-SNAPSHOT.jar</h4>\n<p><img src=\"https://velog.velcdn.com/images/zabcd121/post/edc6786d-ac30-4f8d-8558-11abdbe03b5f/image.png\" alt=\"\">\r\n정상 동작하고 localhost:8080도 잘 돌아감!</p>\n<h3>따라서 서버 배포할 때는 이 jar파일만 서버에 넣어주고 3번 명령문을 실행 하면 됨. 이러면 서버에서도 spring이 동작하게 됨!</h3>\n<h3>과거에는 서버에 tomcat 설치하고 이런저런 복잡한 과정이 있었는데 이제는 jar파일만 넣고 실행시키면 된다고 하니 참 편해진 것 같다.</h3>\n<blockquote>\n<p>참고: ./gradlew.bat clean (MAC: ./gradlew clean)을 진행하면 build폴더 삭제</p>\n</blockquote>\n<h3>참고</h3>\n<h4>궁금한점: gradlew가 뭘까?</h4>\n<h4>- gradle wrapper의 줄인말!</h4>\n<h4>- 새로운 환경에서 프로젝트를 설정할 때 java나 gradle을 설치하지 않고 바로 빌드하게 해주는 역할</h4>\n<h4>- gradlew는 shell script(쉘에서 사용할 수 있는 명령어들의 조합을 모아서 만든 Batch파일)</h4>\n<blockquote>\n<p>쉘: OS상에서 사용자가 입력하는 명령을 읽고 해석하여 대신 실행해주는 프로그램.\r\n(OS의 Kernel과 사용자 사이를 이어주는 역할)\r\n뜬금없지만 예전에 운영체제 과목에서 공부한 개념 복습..</p>\n</blockquote>\n<h4>- gradlew.bat는 window batch script</h4>\n<p align=\"center\">\n<img src=\"https://velog.velcdn.com/images/zabcd121/post/e2b4ae6e-fc68-486b-b5ff-18d4e7ace3d4/image.png\" width=\"40%\">\n  </p>\n<p>참고: <a href=\"https://docs.gradle.org/current/userguide/gradle_wrapper.html\" target=\"_blank\" rel=\"nofollow\">https://docs.gradle.org/current/userguide/gradle_wrapper.html</a></p>\n<h4>gradle을 어떻게 따라서는 여러번 써봤는데 어떤 원리인지 어떤건지는 모르고 썼던 것 같다. 아직 모르지만 시간 나면 먼저 공부해보고 싶다!</h4>","frontmatter":{"title":"3. Spring Library📗와 프로젝트 설정","summary":"2일차 공부","date":"2022.05.27.","categories":["Spring"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABB0lEQVQoz61T22rCQBDdD+3f+NgPEOyDpVTBJ6GClIgUCyK0YNEqQZNWvBXBS7ReEhNnj2RsJIatIDgw7Oywc+ZyZgWuLCIwpJSsKvtiwFMAAskdn4H/nEbjRRj90mpUcccKSRI7OrMmYi83KJhpvm89G7a3hkcuFs4Uc3vMHWzcJfuioxHRDOnaLTTjEYO5gaVj4bn9gOJXBvlWEjn9Dk96gu3XThbmpHYckxLQz/w+KOBzVIY5rWPjrqAZKWSbcVR6eTRGFXz8lPDW13BfjaFr6X9xpGL54Px1LK4gyO6L33JYfIDh4hs78tSknFuRMPvhWf9HpFDtHXEwKdfj9I1Us3zNn7IHJa9YN0fygIsAAAAASUVORK5CYII="},"images":{"fallback":{"src":"/static/ecbfb406b152e2d40fa0e7f87d5b8b97/2ae51/Spring.png","srcSet":"/static/ecbfb406b152e2d40fa0e7f87d5b8b97/4b853/Spring.png 300w,\n/static/ecbfb406b152e2d40fa0e7f87d5b8b97/1886e/Spring.png 600w,\n/static/ecbfb406b152e2d40fa0e7f87d5b8b97/2ae51/Spring.png 1200w","sizes":"(min-width: 1200px) 1200px, 100vw"},"sources":[{"srcSet":"/static/ecbfb406b152e2d40fa0e7f87d5b8b97/b3177/Spring.webp 300w,\n/static/ecbfb406b152e2d40fa0e7f87d5b8b97/ea367/Spring.webp 600w,\n/static/ecbfb406b152e2d40fa0e7f87d5b8b97/8ab23/Spring.webp 1200w","type":"image/webp","sizes":"(min-width: 1200px) 1200px, 100vw"}]},"width":1200,"height":675}},"publicURL":"/static/ecbfb406b152e2d40fa0e7f87d5b8b97/Spring.png"}}}}]}},"pageContext":{"slug":"/Spring3/"}},"staticQueryHashes":[]}